# Coffee->JSHint

[![npm version](https://badge.fury.io/js/coffee-jshint.svg)](https://badge.fury.io/js/coffee-jshint)
[![David dependency drift detection](https://david-dm.org/marviq/coffee-jshint.svg)](https://david-dm.org/marviq/coffee-jshint)

Runs your [CoffeeScript](http://coffeescript.org/) source through [JSHint](http://jshint.com/) to check for errors.


**NOTE: As of version `1.0.0`, `coffee-jshint` changed its dependencies to be on [`coffeescript`](https://www.npmjs.com/package/coffeescript) in favor of the,
now deprecated, [`coffee-script`](https://www.npmjs.com/package/coffee-script) name.**


## Installation

```sh
npm install coffeescript -g ##  See package.json for supported versions (most)
npm install coffee-jshint -g
```


## Usage

To check some files:

```sh
coffee-jshint file1.coffee file2.coffee ...
```


### Options

JSHint takes [a bunch of options](http://jshint.com/docs/options/) that tell it various rules to enforce or relax.  Some of these don't make much sense to
check for JS generated by the CoffeeScript compiler, so by default these options are turned on:


#### Enforcing options

  - **[`undef`](http://jshint.com/docs/options/#undef):** warns about the use of explicitly undeclared variables;


#### Relaxing options

  - **[`eqnull`](http://jshint.com/docs/options/#eqnull):** suppresses warnings about `== null` comparisons, which CoffeeScript uses in its generated JS;
  - **[`expr`](http://jshint.com/docs/options/#expr):** suppresses warnings about the use of expressions where normally you would expect to see assignments or function calls, which can only occur in the generated JS when the CoffeeScript compiler does it on purpose;
  - **[`loopfunc`](http://jshint.com/docs/options/#loopfunc):** suppresses warnings about functions inside of loops, which CoffeeScript produces so often that it becomes too hard to spot the legitimate reports between the false-positives (introduced with version `1.1.0`);
  - **[`multistr`](http://jshint.com/docs/options/#multistr):** suppresses warnings about multi-line strings, since CoffeeScript takes care of them;
  - **[`shadow`](http://jshint.com/docs/options/#shadow):** suppresses warnings about variable shadowing i.e. declaring a variable that had been already declared somewhere in the outer scope, which is fine since CoffeeScript has sane scoping rules and generates safely scoped JS that uses shadowed variables;
  - **[`sub`](http://jshint.com/docs/options/#sub):** suppresses warnings about using `[]` notation when it can be expressed in dot notation since we're grown ups and can make our own decisions about what lookup syntax is best;

To turn on more options, you can use the `--options` or `-o` flag:

    coffee-jshint -o trailing,browser,sub file1.coffee file2.coffee ...

If you really must turn off some of the default options, use the `--default-options-off` flag (you can always use `--options` to turn some back on):

    coffee-jshint --default-options-off --options undef,eqnull ...


### Globals

You'll probably get a lot of complaints from Coffee->JSHint about undefined global variables like `console`, `$`, or `require`.  Depending on where you're
running your code, you might want to allow a few global variables.  One easy way to handle this is to use JSHint's built in
[environment options](http://jshint.com/docs/options/#environments).

For instance, if you're running your code using Node.js, then you'll want to turn on the `node` option.  It works like any other option:

```sh
coffee-jshint -o node ...
```

If you have some globals that aren't covered by any of environments, well then you should probably check yo'self before you wreck yo'self.  But if you really
want to turn off warnings for some global variables, Coffee->JSHint supports it using the `--globals` or `-g` option.  One use case is when using
[Mocha](http://mochajs.org/), a testing library:


```sh
coffee-jshint -o node --globals describe,it ...
```


### Shell scripting

Coffee->JSHint plays nicely with your favorite Unix utilities.  If you want to recursively search all the files in a directory, try piping in the results of a
`find`.  Here's an example that also uses `grep` to filter out files in `node_modules/`:

```sh
find . -type f -path "*.coffee" | grep -v "node_modules/" | xargs coffee-jshint
```


### Git hook

To use Coffee->JSHint as a git pre-commit hook to check changed files before you commit, put something like this in `.git/hooks/pre-commit`:

```bash
git diff --staged --name-only | xargs coffee-jshint
if [[ $? -ne 0 ]]; then
    echo 'WARNING: You are about to commit files with coffee-jshint warnings'
    exit 1
fi
```

This will take all the files you plan to commit changes to, run them through `coffee-jshint`, and exit with status code `1` if there are any warnings (which it will also print out).  If there are warnings, the commit will be aborted, but you can always do `git commit --no-verify` to bypass the hook.


## Contributing

See [CONTRIBUTING](./CONTRIBUTING.md).


## Change Log

See [CHANGELOG](./CHANGELOG.md).


## License

[BSD-3-Clause](LICENSE)
